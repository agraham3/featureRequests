{% extends "base.html" %}
{% block content %}
<div class="page-header">
  <h1>View Requests</h1>
</div>

<form action="" method="post" name="login">
  {{ form.hidden_tag() }}
  <table>
    <tr>
      <td>{{ form.client.label }}</td>
      <td>{{ form.client() }}</td>
      <td>{% for error in form.client.errors %}
          <span style="color: red;">[{{error}}]</span>
          {% endfor %}</td>
    </tr>
    <tr>
      <td><input type="submit" value="Submit" class="btn btn-primary"></td>
    </tr>
  </table>
</form><br>

{% if clientName %}
  {% if clientList %}
    <h2>{{ clientName }}</h2>
    <table class="table table-condensed">
    <tr>
      <th>Priority Number</th>
      <th>Target Date</th>
      <th>Title</th>
      <th>Description</th>
      <th>Ticket URL</th>
      <th>Product Area<th>
    </tr>
    {% for item in clientList %}
      <tr>
        <td>{{ item.priorityNumber }}</td>
        <td>{{ item.targetDate }}</td>
        <td>{{ item.title }}</td>
        <td>{{ item.description }}</td>
        <td>{{ item.ticketURL }}</td>
        <td>{{ item.productArea.name }}</td>
      </tr>
    {% endfor %}
    </table>
  {% else %}
    <p>Client ({{ clientName }}) has no requests.</p>
  {% endif %}
{% endif %}

{% endblock %}